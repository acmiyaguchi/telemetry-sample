service: telemetry-example
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /_ah/push-handlers/.*
  script: telemetry_example.push.app
  login: admin
  secure: always
- url: /__.*__
  script: telemetry_example.dockerflow.app
- url: .*
  script: telemetry_example.edge.app

libraries:
- name: flask
  version: '0.12'
- name: ujson
  version: latest

env_variables:
  BIGQUERY_DATASET: telemetry_example
  NUM_RETRIES: 3
  EDGE_SCHEMA_FILES: '{"main_ping":"schemas/main.4.schema.json"}'
  BIGQUERY_SCHEMA_FILES: '{"main_ping":"schemas/main.4.bigquery.json"}'
  GEOIP2_DATABASE: GeoLite2-Country.mmdb
